        -:    0:Source:randomtest2.c
        -:    0:Graph:randomtest2.gcno
        -:    0:Data:randomtest2.gcda
        -:    0:Runs:2
        -:    0:Programs:1
        -:    1:/*
        -:    2:Author: Aaron Rito
        -:    3:Date: 10/29/18
        -:    4:Client: CS362 assignment 3
        -:    5:Project: unit test for "village"
        -:    6:Source: CS362 class
        -:    7: */
        -:    8:#include "dominion.h"
        -:    9:#include "dominion_helpers.h"
        -:   10:#include <string.h>
        -:   11:#include <stdio.h>
        -:   12:#include "rngs.h"
        -:   13:#include <stdlib.h>
        -:   14:#define TESTCARD "Village"
        -:   15:void my_assert(int result);
        -:   16:int test_passed = 0;
        -:   17:int test_failed = 0;
        2:   18:int main(int argc, char** argv) {
        2:   19:    int seed = MAX_HAND;
        2:   20:    SelectStream(1);
        2:   21:    PutSeed(seed);
        2:   22:    int numPlayers = 2;
        -:   23:    int player,h, i, j;
        -:   24:    struct gameState G;
        -:   25:    int temp_k[10];
        2:   26:    int k[10] = {adventurer, salvager, village, minion, steward, cutpurse,
        -:   27:                    sea_hag, tribute, smithy, council_room};
        2:   28:    printf("----------------- Testing Card: %s ----------------\n", TESTCARD);
        2:   29:    initializeGame(numPlayers, k, seed, &G);
        2:   30:    int num_of_tests = 10000;
    20002:   31:    for(h = 0; h < num_of_tests; h++)
        -:   32:    {
    60000:   33:        for(player = 0; player < numPlayers; player++)
        -:   34:        {
        -:   35:            /* BOUNDRY GET*/
        -:   36:            // get opp players hand
    40000:   37:            int random_hand = Random();
    40000:   38:            G.whoseTurn = player;            
    40000:   39:            G.handCount[G.whoseTurn] = random_hand;
        -:   40:            int opp_player_cards;
    40000:   41:            if (player == 0)
        -:   42:            {
    20000:   43:                G.whoseTurn = player +1;            
    20000:   44:                G.handCount[G.whoseTurn] = random_hand;
    20000:   45:                opp_player_cards = numHandCards(&G);
    20000:   46:                G.whoseTurn = player;
        -:   47:            }
        -:   48:            else
        -:   49:            {
    20000:   50:                G.whoseTurn = player -1;            
    20000:   51:                G.handCount[G.whoseTurn] = random_hand;
    20000:   52:                opp_player_cards = numHandCards(&G);
    20000:   53:                G.whoseTurn = player;
        -:   54:            }           
        -:   55:            // get kingdom supply
   440000:   56:            for(i = 0; i < 10; i++)    
   400000:   57:                temp_k[i] = supplyCount(k[i], &G);
        -:   58:            // get victory supply
    40000:   59:            int estates = supplyCount(estate, &G);
    40000:   60:            int duchys = supplyCount(duchy, &G);
    40000:   61:            int provinces = supplyCount(province, &G);
        -:   62:            /* END BOUNDRY GET*/
        -:   63:            /* START RUN CARD*/ 
    40000:   64:            int num_of_cards = numHandCards(&G);
    40000:   65:            int num_of_actions = G.numActions;
    40000:   66:            village_(1,0,&G);
        -:   67:            // ensure number of cards is correct
    40000:   68:            my_assert((numHandCards(&G) == num_of_cards)&& (G.numActions = num_of_actions + 2));
        -:   69:            /* END RUN CARD CHECK*/
        -:   70:            /* BOUNDRY CHECKS*/
        -:   71:            // ensure kingdom and victory piles the same
   440000:   72:            for(j = 0; j < 10; j++)    
   400000:   73:                my_assert(temp_k[j] == supplyCount(k[j], &G));
    40000:   74:            my_assert(estates == supplyCount(estate, &G));
    40000:   75:            my_assert(duchys == supplyCount(duchy, &G));
    40000:   76:            my_assert(provinces == supplyCount(province, &G)); 
        -:   77:            // check player state
    40000:   78:            if (player == 0)
        -:   79:            {
    20000:   80:                G.whoseTurn = player +1;            
    20000:   81:                G.handCount[G.whoseTurn] = random_hand;
    20000:   82:                opp_player_cards = numHandCards(&G);
        -:   83:            }
        -:   84:            else
        -:   85:            {
    20000:   86:                G.whoseTurn = player -1;            
    20000:   87:                G.handCount[G.whoseTurn] = random_hand;
    20000:   88:                my_assert(opp_player_cards = numHandCards(&G));
        -:   89:            }
        -:   90:        }
        -:   91:    }
        2:   92:    printf("%d tests passed.\n", test_passed);
        2:   93:    printf("%d tests failed.\n", test_failed);
        -:   94:}
   580000:   95:void my_assert(int result) {
   580000:   96:    if (result) 
   540010:   97:        test_passed++;
        -:   98:    else
    39990:   99:        test_failed++;         
   580000:  100:}
